import{r as l,a as se,b as z}from"./vendor-BIF_SMrh.js";import{u as q,L as w,a as te,b as re,B as ae,R as ne,c as L,N as O}from"./router-CUWjF_jz.js";import{a as oe}from"./api-B9ygI19o.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();var U={exports:{}},F={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var le=l,ie=Symbol.for("react.element"),ce=Symbol.for("react.fragment"),de=Object.prototype.hasOwnProperty,me=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function J(s,t,r){var a,n={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)de.call(t,a)&&!xe.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:ie,type:s,key:o,ref:i,props:n,_owner:me.current}}F.Fragment=ce;F.jsx=J;F.jsxs=J;U.exports=F;var e=U.exports,V={},W=se;V.createRoot=W.createRoot,V.hydrateRoot=W.hydrateRoot;const ue="http://localhost:8081",u=oe.create({baseURL:ue,headers:{"Content-Type":"application/json"}});u.interceptors.request.use(s=>{const t=localStorage.getItem("token");return t&&(s.headers.Authorization=`Bearer ${t}`),s},s=>Promise.reject(s));u.interceptors.response.use(s=>s,s=>{var t;return((t=s.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(s)});const $={login:async(s,t)=>(await u.post("/auth/login",{email:s,password:t})).data,register:async(s,t,r,a)=>(await u.post("/auth/register",{email:s,password:t,firstName:r,lastName:a})).data,getCurrentUser:async()=>(await u.get("/auth/me")).data,refreshToken:async()=>(await u.post("/auth/refresh")).data},P={getAll:async()=>(await u.get("/projects")).data,getPaginated:async(s=0,t=10,r="createdAt",a="desc")=>(await u.get("/projects/paginated",{params:{page:s,size:t,sortBy:r,sortDir:a}})).data,search:async(s,t=0,r=10)=>(await u.get("/projects/search",{params:{q:s,page:t,size:r}})).data,getById:async s=>(await u.get(`/projects/${s}`)).data,create:async s=>(await u.post("/projects",s)).data,update:async(s,t)=>(await u.put(`/projects/${s}`,t)).data,delete:async s=>{await u.delete(`/projects/${s}`)},getProgress:async s=>(await u.get(`/projects/${s}/progress`)).data,updateStatus:async(s,t)=>(await u.patch(`/projects/${s}/status`,{status:t})).data},M={getByProject:async s=>(await u.get(`/projects/${s}/tasks`)).data,getPaginated:async(s,t=0,r=10,a="createdAt",n="desc")=>(await u.get(`/projects/${s}/tasks/paginated`,{params:{page:t,size:r,sortBy:a,sortDir:n}})).data,searchAndFilter:async(s,{searchTerm:t="",completed:r=null,priority:a=null,status:n=null,page:o=0,size:i=10,sortBy:b="createdAt",sortDir:y="desc"}={})=>{const h={page:o,size:i,sortBy:b,sortDir:y};return t&&(h.search=t),r!==null&&(h.completed=r),a&&(h.priority=a),n&&(h.status=n),(await u.get(`/projects/${s}/tasks/search`,{params:h})).data},getById:async s=>(await u.get(`/tasks/${s}`)).data,create:async(s,t)=>(await u.post(`/projects/${s}/tasks`,t)).data,update:async(s,t)=>(await u.put(`/tasks/${s}`,t)).data,delete:async s=>{await u.delete(`/tasks/${s}`)},complete:async s=>(await u.patch(`/tasks/${s}/complete`)).data,uncomplete:async s=>(await u.patch(`/tasks/${s}/uncomplete`)).data,updateStatus:async(s,t)=>(await u.patch(`/tasks/${s}/status`,{status:t})).data,updatePriority:async(s,t)=>(await u.patch(`/tasks/${s}/priority`,{priority:t})).data,getOverdue:async s=>(await u.get(`/projects/${s}/tasks/overdue`)).data,getDueToday:async s=>(await u.get(`/projects/${s}/tasks/due-today`)).data,getDueSoon:async(s,t=7)=>(await u.get(`/projects/${s}/tasks/due-soon`,{params:{days:t}})).data},R=s=>{var t,r;return(r=(t=s.response)==null?void 0:t.data)!=null&&r.message?s.response.data.message:s.message?s.message:"An unexpected error occurred"},G=l.createContext(null),E=()=>{const s=l.useContext(G);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},he=({children:s})=>{const[t,r]=l.useState(null),[a,n]=l.useState(null),[o,i]=l.useState(!0);l.useEffect(()=>{(()=>{const c=localStorage.getItem("token"),p=localStorage.getItem("user");if(c&&p)try{const f=JSON.parse(p);n(c),r(f),$.getCurrentUser().then(k=>{r(k),localStorage.setItem("user",JSON.stringify(k))}).catch(()=>{h()}).finally(()=>{i(!1)})}catch(f){console.error("Error parsing saved user:",f),h(),i(!1)}else i(!1)})()},[]);const b=async(d,c)=>{try{i(!0);const p=await $.login(d,c),{token:f,...k}=p;return n(f),r(k),localStorage.setItem("token",f),localStorage.setItem("user",JSON.stringify(k)),{success:!0,user:k}}catch(p){return console.error("Login error:",p),{success:!1,error:R(p)}}finally{i(!1)}},y=async d=>{try{i(!0);const{email:c,password:p,firstName:f,lastName:k}=d,C=await $.register(c,p,f,k),{token:T,...D}=C;return n(T),r(D),localStorage.setItem("token",T),localStorage.setItem("user",JSON.stringify(D)),{success:!0,user:D}}catch(c){return console.error("Registration error:",c),{success:!1,error:R(c)}}finally{i(!1)}},h=()=>{r(null),n(null),localStorage.removeItem("token"),localStorage.removeItem("user")},v={user:t,token:a,isAuthenticated:!!a&&!!t,isLoading:o,login:b,register:y,logout:h,updateUser:d=>{r(d),localStorage.setItem("user",JSON.stringify(d))},refreshToken:async()=>{try{const d=await $.refreshToken(),{token:c,...p}=d;return n(c),r(p),localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(p)),{success:!0}}catch(d){return console.error("Token refresh error:",d),h(),{success:!1,error:R(d)}}}};return e.jsx(G.Provider,{value:v,children:s})},pe=()=>{const[s,t]=l.useState({email:"admin@test.com",password:"password123"}),[r,a]=l.useState({}),[n,o]=l.useState(!1),{login:i,isAuthenticated:b}=E(),y=q();l.useEffect(()=>{b&&y("/dashboard",{replace:!0})},[b,y]);const h=g=>{const{name:v,value:d}=g.target;t(c=>({...c,[v]:d})),r[v]&&a(c=>({...c,[v]:""}))},m=()=>{const g={};return s.email?/\S+@\S+\.\S+/.test(s.email)||(g.email="Email is invalid"):g.email="Email is required",s.password?s.password.length<6&&(g.password="Password must be at least 6 characters"):g.password="Password is required",g},j=async g=>{g.preventDefault();const v=m();if(Object.keys(v).length>0){a(v);return}o(!0),a({});try{const d=await i(s.email,s.password);d.success?y("/dashboard"):a({general:d.error||"Login failed. Please try again."})}catch(d){console.error("Login error:",d),a({general:"Network error. Please check your connection."})}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Task Manager"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Sign in to your account"}),e.jsx("p",{className:"text-gray-600",children:"Manage your projects and tasks efficiently"})]}),e.jsxs("div",{className:"bg-white py-8 px-6 shadow-lg rounded-lg",children:[e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[r.general&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.general]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:`input ${r.email?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"Enter your email",value:s.email,onChange:h,disabled:n}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:`input ${r.password?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"Enter your password",value:s.password,onChange:h,disabled:n}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"btn-primary w-full flex justify-center items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-5 h-5 mr-2"}),"Signing in..."]}):"Sign in"})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Demo Credentials:"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Email: admin@test.com",e.jsx("br",{}),"Password: password123"]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(w,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Sign up here"})]})})]})})},_=({current:s=0,total:t=100,percentage:r=null,showLabel:a=!0,showNumbers:n=!0,height:o="h-4",color:i="blue",backgroundColor:b="gray-200",className:y="",animated:h=!0})=>{const m=r!==null?Math.min(100,Math.max(0,r)):t>0?Math.min(100,Math.max(0,s/t*100)):0,j={blue:"bg-blue-500",green:"bg-green-500",red:"bg-red-500",yellow:"bg-yellow-500",purple:"bg-purple-500",indigo:"bg-indigo-500",pink:"bg-pink-500",gray:"bg-gray-500"},g=j[i]||j.blue;return e.jsxs("div",{className:`w-full ${y}`,children:[(a||n)&&e.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm",children:[a&&e.jsx("span",{className:"font-medium text-gray-700",children:"Progress"}),n&&e.jsxs("div",{className:"flex items-center space-x-2",children:[r===null&&e.jsxs("span",{className:"text-gray-600",children:[s," / ",t]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[Math.round(m),"%"]})]})]}),e.jsx("div",{className:`w-full bg-${b} rounded-full ${o} overflow-hidden`,children:e.jsx("div",{className:`${o} ${g} rounded-full transition-all duration-500 ease-out ${h?"transform origin-left":""}`,style:{width:`${m}%`},children:m>0&&m<100&&h&&e.jsx("div",{className:"h-full w-full bg-gradient-to-r from-transparent via-white/30 to-transparent animate-pulse"})})}),m===100&&e.jsx("div",{className:"flex items-center justify-center mt-2",children:e.jsxs("span",{className:"text-green-600 text-xs font-medium flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Complete!"]})})]})},ge=()=>{const{user:s}=E(),[t,r]=l.useState({totalProjects:0,totalTasks:0,completedTasks:0,overallProgress:0}),[a,n]=l.useState([]),[o,i]=l.useState(!0),[b,y]=l.useState("");l.useEffect(()=>{h()},[]);const h=async()=>{try{i(!0),y("");const m=await P.getAll();n(m.slice(0,5));let j=0,g=0;const v=m.map(async p=>{try{const f=await P.getProgress(p.id);return{total:f.totalTasks||0,completed:f.completedTasks||0}}catch{return{total:0,completed:0}}}),d=await Promise.all(v);j=d.reduce((p,f)=>p+f.total,0),g=d.reduce((p,f)=>p+f.completed,0);const c=j>0?g/j*100:0;r({totalProjects:m.length,totalTasks:j,completedTasks:g,overallProgress:Math.round(c)})}catch(m){console.error("Dashboard data loading error:",m),y("Failed to load dashboard data. Please refresh the page.")}finally{i(!1)}};return o?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"loading-spinner w-12 h-12"})}):e.jsxs("div",{className:"page-container py-8",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{className:"page-title",children:["Welcome back, ",(s==null?void 0:s.fullName)||(s==null?void 0:s.firstName)||(s==null?void 0:s.email)||"User","! ðŸ‘‹"]}),e.jsx("p",{className:"page-subtitle",children:"Here's what's happening with your projects today."})]}),b&&e.jsx("div",{className:"mb-8 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),b,e.jsx("button",{onClick:h,className:"ml-4 text-sm underline hover:no-underline",children:"Try again"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Projects"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.totalProjects})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Total Tasks"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.totalTasks})]}),e.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Completed Tasks"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:t.completedTasks})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Overall Progress"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[t.overallProgress,"%"]})]}),e.jsx("div",{className:"h-12 w-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})})]}),e.jsxs("div",{className:"card mb-8",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Overall Progress"})}),e.jsx(_,{current:t.completedTasks,total:t.totalTasks,percentage:t.overallProgress,color:"blue",height:"h-6",animated:!0})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header flex items-center justify-between",children:[e.jsx("h2",{className:"section-title",children:"Recent Projects"}),e.jsx(w,{to:"/projects",className:"text-blue-600 hover:text-blue-500 font-medium text-sm",children:"View all projects â†’"})]}),a.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No projects yet"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Get started by creating your first project!"}),e.jsx(w,{to:"/projects",className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Create Project"})]}):e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(m=>e.jsxs(w,{to:`/projects/${m.id}`,className:"card card-hover",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:m.title}),m.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:m.description}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Progress"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"0%"}})})]})]},m.id))})]}),e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"section-header",children:e.jsx("h2",{className:"section-title",children:"Quick Actions"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs(w,{to:"/projects",className:"card card-hover text-center",children:[e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Create Project"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Start a new project and organize your tasks"})]}),e.jsxs(w,{to:"/projects",className:"card card-hover text-center",children:[e.jsx("div",{className:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"View Projects"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Browse and manage all your projects"})]}),e.jsxs("button",{onClick:h,className:"card card-hover text-center",children:[e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Refresh Data"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update your dashboard with latest information"})]})]})]})]})},je=()=>{const[s,t]=l.useState([]),[r,a]=l.useState(!0),[n,o]=l.useState(""),[i,b]=l.useState({title:"",description:""}),[y,h]=l.useState(!1),[m,j]=l.useState("");l.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0),o("");const c=await P.getAll();t(c)}catch(c){console.error("Failed to load projects:",c),o("Failed to load projects. Please try again.")}finally{a(!1)}},v=async c=>{if(c.preventDefault(),!i.title.trim()){j("Project title is required");return}try{h(!0),j("");const p=await P.create(i);t([...s,p]),b({title:"",description:""})}catch(p){console.error("Failed to create project:",p),j("Failed to create project. Please try again.")}finally{h(!1)}},d=c=>{const{name:p,value:f}=c.target;b(k=>({...k,[p]:f})),m&&j("")};return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"loading-spinner w-12 h-12"})}):e.jsxs("div",{className:"page-container py-8",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{className:"page-title",children:"Projects"}),e.jsx("p",{className:"page-subtitle",children:"Manage and organize your projects"})]}),e.jsxs("div",{className:"card mb-8",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Create New Project"})}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:d,className:"input",placeholder:"Enter project title",required:!0,disabled:y})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",id:"description",name:"description",value:i.description,onChange:d,className:"input",placeholder:"Brief project description",disabled:y})]})]}),m&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-md text-sm",children:m}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:y,className:"btn-primary",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Creating..."]}):"Create Project"})})]})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:"Your Projects"}),s.length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[s.length," project",s.length!==1?"s":""]})]}),n&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:n}),e.jsx("button",{onClick:g,className:"text-sm underline hover:no-underline ml-4",children:"Retry"})]})}),s.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No projects yet"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Create your first project to get started with organizing your tasks."})]}):e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:s.map(c=>e.jsx(fe,{project:c},c.id))})]})]})},fe=({project:s})=>{const[t,r]=l.useState({totalTasks:0,completedTasks:0,progressPercentage:0}),[a,n]=l.useState(!0);l.useEffect(()=>{o()},[s.id]);const o=async()=>{try{const i=await P.getProgress(s.id);r(i)}catch(i){console.error("Failed to load progress:",i),r({totalTasks:0,completedTasks:0,progressPercentage:0})}finally{n(!1)}};return e.jsxs(w,{to:`/projects/${s.id}`,className:"card card-hover",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"mt-auto",children:[a?e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-2 bg-gray-200 rounded w-full mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]}):e.jsx(_,{current:t.completedTasks,total:t.totalTasks,percentage:t.progressPercentage,showLabel:!1,height:"h-2",color:"blue"}),e.jsxs("div",{className:"flex items-center justify-between mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:[t.totalTasks," task",t.totalTasks!==1?"s":""]}),e.jsx("span",{className:"text-blue-600 font-medium",children:"View â†’"})]})]})]})},ye=()=>{const{projectId:s}=te();q();const[t,r]=l.useState(null),[a,n]=l.useState([]),[o,i]=l.useState({totalTasks:0,completedTasks:0,progressPercentage:0}),[b,y]=l.useState(!0),[h,m]=l.useState(!1),[j,g]=l.useState(""),[v,d]=l.useState(""),[c,p]=l.useState(!1),[f,k]=l.useState({title:"",description:"",dueDate:""}),[C,T]=l.useState("all"),[D,A]=l.useState([]);l.useEffect(()=>{s&&(H(),Y())},[s]),l.useEffect(()=>{K()},[a,C]);const H=async()=>{try{y(!0),g("");const x=await P.getById(s);r(x)}catch(x){console.error("Failed to load project:",x),g("Failed to load project. Please try again.")}finally{y(!1)}},Y=async()=>{try{m(!0),d("");const[x,N]=await Promise.all([M.getByProject(s),P.getProgress(s)]);n(x),i(N)}catch(x){console.error("Failed to load tasks and progress:",x),d("Failed to load tasks. Please try again.")}finally{m(!1)}},K=()=>{A(C==="completed"?a.filter(x=>x.completed):C==="pending"?a.filter(x=>!x.completed):a)},Q=async x=>{if(x.preventDefault(),!f.title.trim()){d("Task title is required");return}try{p(!0),d("");const N=await M.create(s,f);n([...a,N]),k({title:"",description:"",dueDate:""});const S=await P.getProgress(s);i(S)}catch(N){console.error("Failed to create task:",N),d("Failed to create task. Please try again.")}finally{p(!1)}},X=async x=>{try{await M.complete(x),n(a.map(S=>S.id===x?{...S,completed:!0}:S));const N=await P.getProgress(s);i(N)}catch(N){console.error("Failed to complete task:",N),d("Failed to complete task.")}},Z=async x=>{if(window.confirm("Are you sure you want to delete this task?"))try{await M.delete(x),n(a.filter(S=>S.id!==x));const N=await P.getProgress(s);i(N)}catch(N){console.error("Failed to delete task:",N),d("Failed to delete task.")}},I=x=>{const{name:N,value:S}=x.target;k(ee=>({...ee,[N]:S})),v&&d("")};return b?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"loading-spinner w-12 h-12"})}):j&&!t?e.jsx("div",{className:"page-container py-8",children:e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:j}),e.jsxs("div",{className:"space-x-4",children:[e.jsx("button",{onClick:H,className:"text-sm underline hover:no-underline",children:"Retry"}),e.jsx(w,{to:"/projects",className:"text-sm underline hover:no-underline",children:"Back to Projects"})]})]})})}):e.jsxs("div",{className:"page-container py-8",children:[e.jsx("div",{className:"page-header",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center space-x-4 mb-2",children:e.jsx(w,{to:"/projects",className:"text-blue-600 hover:text-blue-500 font-medium",children:"â† Back to Projects"})}),e.jsx("h1",{className:"page-title",children:t==null?void 0:t.title}),(t==null?void 0:t.description)&&e.jsx("p",{className:"page-subtitle",children:t.description})]})})}),e.jsxs("div",{className:"card mb-8",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Project Progress"})}),e.jsx(_,{current:o.completedTasks,total:o.totalTasks,percentage:o.progressPercentage,height:"h-6",color:"blue",animated:!0})]}),e.jsxs("div",{className:"card mb-8",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Add New Task"})}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:f.title,onChange:I,className:"input",placeholder:"Enter task title",required:!0,disabled:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",id:"dueDate",name:"dueDate",value:f.dueDate,onChange:I,className:"input",disabled:c})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:f.description,onChange:I,className:"input",rows:"3",placeholder:"Task description (optional)",disabled:c})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded-md text-sm",children:v}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"btn-primary",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Creating..."]}):"Create Task"})})]})]}),e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"section-header flex items-center justify-between",children:[e.jsx("h2",{className:"section-title",children:"Tasks"}),a.length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:[D.length," of ",a.length," task",a.length!==1?"s":""]})]}),a.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 mb-6 p-1 bg-gray-100 rounded-lg w-fit",children:[e.jsxs("button",{onClick:()=>T("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${C==="all"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["All (",a.length,")"]}),e.jsxs("button",{onClick:()=>T("pending"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${C==="pending"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Pending (",a.filter(x=>!x.completed).length,")"]}),e.jsxs("button",{onClick:()=>T("completed"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${C==="completed"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:["Completed (",a.filter(x=>x.completed).length,")"]})]}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"loading-spinner w-8 h-8"})}):a.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 4h6m-6 4h6"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No tasks yet"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Create your first task above to get started."})]}):D.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["No ",C," tasks"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"No tasks match the current filter."})]}):e.jsx("div",{className:"space-y-4",children:D.map(x=>e.jsx(be,{task:x,onComplete:()=>X(x.id),onDelete:()=>Z(x.id)},x.id))})]})]})},be=({task:s,onComplete:t,onDelete:r})=>{const[a,n]=l.useState(!1),[o,i]=l.useState(!1),b=async()=>{if(!s.completed){n(!0);try{await t()}finally{n(!1)}}},y=async()=>{i(!0);try{await r()}finally{i(!1)}},h=j=>j?new Date(j).toLocaleDateString():null,m=j=>{if(!j||s.completed)return!1;const g=new Date(j),v=new Date;return v.setHours(0,0,0,0),g<v};return e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("input",{type:"checkbox",checked:s.completed,onChange:b,disabled:a||s.completed,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${s.completed?"line-through text-gray-500":"text-gray-900"}`,children:s.title}),s.description&&e.jsx("p",{className:`text-sm mt-1 ${s.completed?"text-gray-400":"text-gray-600"}`,children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.completed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.completed?"âœ“ Completed":"â—‹ Pending"}),s.dueDate&&e.jsxs("span",{className:`text-xs ${m(s.dueDate)?"text-red-600 font-medium":"text-gray-500"}`,children:["Due: ",h(s.dueDate),m(s.dueDate)&&" (Overdue)"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.completed&&e.jsx("button",{onClick:b,disabled:a,className:"btn-sm bg-green-100 text-green-700 hover:bg-green-200 border-green-200",children:a?"Completing...":"Complete"}),e.jsx("button",{onClick:y,disabled:o,className:"btn-sm bg-red-100 text-red-700 hover:bg-red-200 border-red-200",children:o?"Deleting...":"Delete"})]})]})})},ve=()=>{const{user:s,logout:t}=E(),r=re(),a=()=>{t()},n=o=>r.pathname===o||r.pathname.startsWith(o);return e.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-40",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(w,{to:"/dashboard",className:"text-2xl font-bold text-blue-600 hover:text-blue-700",children:"Task Manager"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx(w,{to:"/dashboard",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/dashboard")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Dashboard"}),e.jsx(w,{to:"/projects",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/projects")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Projects"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-gray-600 hidden sm:inline",children:(s==null?void 0:s.fullName)||(s==null?void 0:s.firstName)||(s==null?void 0:s.email)||"User"}),e.jsxs("button",{onClick:a,className:"flex items-center px-3 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}),e.jsx("div",{className:"md:hidden pb-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(w,{to:"/dashboard",className:`flex-1 text-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/dashboard")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Dashboard"}),e.jsx(w,{to:"/projects",className:`flex-1 text-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${n("/projects")?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Projects"})]})})]})})};class Ne extends z.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t,errorInfo:r})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We encountered an unexpected error. Please refresh the page or try again later."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"Reload Page"}),e.jsx("button",{onClick:()=>window.location.href="/dashboard",className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-200 transition-colors text-sm font-medium",children:"Go to Dashboard"})]})]})}):this.props.children}}function B({children:s}){const{isAuthenticated:t,isLoading:r}=E();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?s:e.jsx(O,{to:"/login",replace:!0})}function we(){const{isAuthenticated:s}=E();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s&&e.jsx(ve,{}),e.jsx("main",{className:s?"pt-16":"",children:e.jsxs(ne,{children:[e.jsx(L,{path:"/login",element:e.jsx(pe,{})}),e.jsx(L,{path:"/dashboard",element:e.jsx(B,{children:e.jsx(ge,{})})}),e.jsx(L,{path:"/projects",element:e.jsx(B,{children:e.jsx(je,{})})}),e.jsx(L,{path:"/projects/:projectId",element:e.jsx(B,{children:e.jsx(ye,{})})}),e.jsx(L,{path:"/",element:e.jsx(O,{to:"/dashboard",replace:!0})}),e.jsx(L,{path:"*",element:e.jsx(O,{to:"/dashboard",replace:!0})})]})})]})}function ke(){return e.jsx(Ne,{children:e.jsx(ae,{children:e.jsx(he,{children:e.jsx(we,{})})})})}V.createRoot(document.getElementById("root")).render(e.jsx(z.StrictMode,{children:e.jsx(ke,{})}));
